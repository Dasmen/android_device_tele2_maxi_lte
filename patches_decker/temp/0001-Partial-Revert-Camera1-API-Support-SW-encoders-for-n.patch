From c180469e97c0093e33558884374ef699812ffa4e Mon Sep 17 00:00:00 2001
From: DeckerSU <support@decker.su>
Date: Sat, 18 Feb 2017 21:07:59 +0300
Subject: [PATCH 1/6] =?UTF-8?q?Partial=20Revert=20"Camera1=20API:=20Suppor?=
 =?UTF-8?q?t=20SW=20encoders=20for=20new=20camera=20HALs"=E2=80=A6?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

https://github.com/ResurrectionRemix-mtk/android_frameworks_av-rr/commit/f4f0f3d4201f573f8a522e50e4a00c1ac1c6a29d

Change-Id: I45fab96e182c0c1e81a736fa56566ad63da9f3e9
---
 media/libstagefright/CameraSource.cpp | 10 ----------
 1 file changed, 10 deletions(-)

diff --git a/media/libstagefright/CameraSource.cpp b/media/libstagefright/CameraSource.cpp
index fc45e38..b51a7b8 100644
--- a/media/libstagefright/CameraSource.cpp
+++ b/media/libstagefright/CameraSource.cpp
@@ -759,16 +759,6 @@ status_t CameraSource::startCameraRecording() {
             }
         }
 
-        err = mCamera->sendCommand(
-            CAMERA_CMD_SET_VIDEO_FORMAT, mEncoderFormat, mEncoderDataSpace);
-
-        // This could happen for CameraHAL1 clients; thus the failure is
-        // not a fatal error
-        if (err != OK) {
-            ALOGW("Failed to set video encoder format/dataspace to %d, %d due to %d",
-                    mEncoderFormat, mEncoderDataSpace, err);
-        }
-
         // Create memory heap to store buffers as VideoNativeMetadata.
         createVideoBufferMemoryHeap(sizeof(VideoNativeHandleMetadata), kDefaultVideoBufferCount);
     }
-- 
2.7.4

